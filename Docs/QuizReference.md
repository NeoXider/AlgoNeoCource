# Справочник по квизам (Quiz Reference)

Полное руководство по созданию интерактивных тестов в уроках.

## Содержание

- [Основы](#основы)
- [Типы квизов](#типы-квизов)
- [Синтаксис](#синтаксис)
- [Настройки](#настройки)
- [Поведение и UX](#поведение-и-ux)
- [Примеры](#примеры)
- [Рекомендации](#рекомендации)

## Основы

Квизы позволяют встраивать интерактивные вопросы прямо в Markdown-урок. Студент отвечает на вопросы, получает мгновенную обратную связь и не может продолжить без правильного ответа (опционально).

### Базовый синтаксис

````md
```quiz
id: уникальный-идентификатор
kind: тип-вопроса
text: Текст вопроса
answers:
  - text: Вариант ответа 1
    correct: true
  - text: Вариант ответа 2
  - text: Вариант ответа 3
```
````

## Типы квизов

### Single Choice (одиночный выбор)

**Когда использовать:**
- Классические тестовые вопросы с одним верным вариантом
- Проверка терминов, определений
- Вопросы "Что делает этот метод?"
- Вопросы "Какой тип выбрать?"

**UX:**
- Ответ отправляется **по клику** на вариант
- Попытка фиксируется **сразу**
- Верный ответ подсвечивается **зелёным**
- Неверный выбор подсвечивается **красным**
- При правильном ответе вопрос закрывается

**Пример:**

````quiz
id: method-start
kind: single
text: Какой метод вызывается один раз при старте игры?
answers:
  - text: Start()
    correct: true
  - text: Update()
  - text: FixedUpdate()
  - text: Awake()
````

### Multiple Choice (множественный выбор)

**Когда использовать:**
- Задачи, где правильных ответов несколько
- Вопросы "Выберите все компоненты"
- Вопросы "Какие варианты верны?"
- Проверка знания нескольких связанных концептов

**UX:**
- Кликом отмечаются варианты (checkbox-подобное поведение)
- Нужно нажать кнопку **"Проверить"**
- Попытка списывается **при проверке**
- Все правильные варианты подсвечиваются **зелёным**
- Неверно выбранные подсвечиваются **красным**

**Пример:**

````quiz
id: unity-components
kind: multiple
text: Какие из перечисленных являются компонентами Unity? (Выберите все подходящие)
answers:
  - text: Transform
    correct: true
  - text: Rigidbody
    correct: true
  - text: GameObject
  - text: SceneManager
  - text: Camera
    correct: true
````

**Важно:** Формулируйте текст вопроса явно: "Выберите все, что подходит". Отмечайте `correct: true` у **всех** верных вариантов.

### True/False (верно/неверно)

**Когда использовать:**
- Проверка коротких утверждений
- Быстрые проверки понимания между теорией
- Проверка знания фактов
- Простые yes/no вопросы

**UX:**
- Аналогично **single-choice**
- Ответ по клику, попытка сразу
- Подсветка зелёным/красным

**Пример:**

````quiz
id: update-frame
kind: truefalse
text: Метод Update() вызывается один раз за кадр.
answers:
  - text: True
    correct: true
  - text: False
````

**Примечание:** Технически `truefalse` — это упрощённый `single` с двумя вариантами, но явное указание типа улучшает читаемость.

## Синтаксис

### Обязательные поля

| Поле | Тип | Описание |
|------|-----|----------|
| `id` | string | Уникальный идентификатор в рамках **всего курса** |
| `kind` | enum | Тип: `single`, `multiple`, `truefalse` |
| `text` | string | Формулировка вопроса (можно многострочная) |
| `answers` | array | Список вариантов ответов |

### Поля ответа

| Поле | Тип | Описание |
|------|-----|----------|
| `text` | string | Текст варианта ответа |
| `correct` | boolean | `true` для правильных ответов (по умолчанию `false`) |

### Многострочный текст вопроса

Если вопрос длинный, можно использовать многострочный YAML-синтаксис:

```quiz
id: long-question
kind: single
text: |
  Какой метод используется для преобразования числа в строку
  в C# и .NET Framework?
answers:
  - text: .ToString()
    correct: true
  - text: .AsString()
  - text: .ConvertToText()
```

**Альтернатива (с продолжением строки):**

```quiz
id: long-question
kind: single
text: Какой метод используется для преобразования числа в строку в C# и .NET Framework?
answers:
  - text: .ToString()
    correct: true
```

## Настройки

Настройки квизов доступны в Unity:

**Путь:** `Tools → AlgoNeoCourse → Settings → Open Quiz Settings`

### Доступные опции

| Опция | Тип | Описание | По умолчанию |
|-------|-----|----------|--------------|
| `maxAttemptsPerQuestion` | int | Максимум попыток на вопрос | 3 |
| `randomizeAnswersOnCourseOpen` | bool | Перемешивать ответы при открытии курса | true |
| `guardSlideNavigation` | bool | Блокировать навигацию при незавершённых вопросах | true |
| `persistState` | bool | Сохранять состояние между сессиями | true |
| `saveStateAsJson` | bool | Сохранять состояние в JSON | true |
| `stateJsonFolder` | string | Папка для JSON-файлов состояния | "QuizData/" |

### Как работают попытки

**Single/TrueFalse:**
- Попытка списывается при **клике** на вариант
- Если попытки закончились — показывается правильный ответ

**Multiple:**
- Попытка списывается при нажатии **"Проверить"**
- Можно менять выбор до нажатия кнопки

### Перемешивание ответов

- Происходит **один раз** при первом открытии урока
- Порядок фиксируется на время сессии
- Если включена персистенция — порядок сохраняется между запусками
- Правильные ответы перемешиваются вместе с неправильными

## Поведение и UX

### Визуальная подсветка

- ✅ **Зелёный** — правильный ответ
- ❌ **Красный** — неверный выбор
- **Серый/нейтральный** — не выбранные варианты

### Блокировка навигации

Если `guardSlideNavigation = true`:
- Нельзя перейти на следующий слайд пока есть незавершённые вопросы
- Кнопка "Далее" и горячие клавиши блокируются
- Показывается подсказка "Завершите тест для продолжения"

### Состояние вопроса

Вопрос считается **завершённым**, если:
- Дан **правильный** ответ, или
- Исчерпаны все попытки

### Персистенция (сохранение прогресса)

Если `persistState = true`:
- Ответы сохраняются между сессиями Unity
- При повторном открытии урока показываются результаты предыдущих ответов
- Можно сбросить прогресс через меню плагина

## Примеры

### Пример 1: Простой вопрос по синтаксису

```quiz
id: csharp-private
kind: single
text: Какой модификатор доступа делает поле приватным в C#?
answers:
  - text: private
    correct: true
  - text: public
  - text: protected
  - text: internal
```

### Пример 2: Проверка понимания концепта

```quiz
id: increment-postfix
kind: single
text: Чему будет равна переменная z после выполнения кода: int x = 5; int z = x++;
answers:
  - text: 6
  - text: 5
    correct: true
  - text: 4
```

### Пример 3: Множественный выбор компонентов

```quiz
id: unity-rendering-components
kind: multiple
text: Какие из перечисленных компонентов участвуют в отрисовке объекта в Unity?
answers:
  - text: MeshRenderer
    correct: true
  - text: SpriteRenderer
    correct: true
  - text: Transform
  - text: Rigidbody
  - text: Camera
    correct: true
```

### Пример 4: True/False для быстрой проверки

```quiz
id: float-division
kind: truefalse
text: При делении двух целых чисел (int) результат всегда будет целым числом.
answers:
  - text: True
    correct: true
  - text: False
```

### Пример 5: Вопрос с пояснением на следующем слайде

**Слайд с вопросом:**

```md
## Вопрос

```quiz
id: remainder-operator
kind: single
text: Чему будет равен результат выражения: 14 % 4
answers:
  - text: 3.5
  - text: 3
  - text: 2
    correct: true
  - text: 0
```

---

## Пояснение

Оператор `%` вычисляет остаток от деления.

- 14 разделить на 4 = 3 (целая часть)
- 3 × 4 = 12
- 14 - 12 = **2** (остаток)

Поэтому `14 % 4 = 2`
```

## Рекомендации

### Проектирование вопросов

1. **Один вопрос = один слайд**
   - Разделяйте вопросы через `---`
   - Пояснение размещайте на следующем слайде

2. **Формулируйте чётко**
   - Вопрос должен быть понятен без контекста
   - Для `multiple` явно указывайте "Выберите все подходящие"

3. **Используйте правильный тип**
   - `single` — для однозначных вопросов
   - `multiple` — когда правильных ответов несколько
   - `truefalse` — для утверждений и фактов

4. **Не используйте заголовки H1-H3**
   - Текст вопроса — это обычный текст, не заголовок
   - Используйте класс `.quiz-title` для стилизации

### Уникальность ID

- Используйте префиксы по урокам: `m2y3-q1`, `m2y3-q2`
- Или по темам: `variables-int`, `variables-float`
- ID должен быть уникален в рамках **всего курса**

### Количество вариантов

- **Single/TrueFalse:** 2-5 вариантов (оптимально 4)
- **Multiple:** 4-7 вариантов (минимум 3 правильных)
- Избегайте слишком длинных списков (> 8 вариантов)

### Дистракторы (неправильные ответы)

- Должны быть **правдоподобными**
- Основаны на типичных ошибках студентов
- Не должны быть очевидно неверными

**Плохой пример:**

```quiz
id: bad-distractors
kind: single
text: Какой тип данных используется для целых чисел?
answers:
  - text: int
    correct: true
  - text: банан
  - text: 12345
```

**Хороший пример:**

```quiz
id: good-distractors
kind: single
text: Какой тип данных используется для целых чисел?
answers:
  - text: int
    correct: true
  - text: float
  - text: double
  - text: decimal
```

### Связь с контентом

- Вопрос должен проверять **изученный материал**
- Размещайте квизы **после** объяснения концепта
- Предоставляйте **пояснения** на следующем слайде

### Типичная структура в уроке

```md
## Теория: Концепт

Объяснение с примерами

---

## Практика: Часть 1

```quiz
id: q1
kind: single
text: Вопрос по концепту?
answers:
  - text: Правильный
    correct: true
  - text: Неправильный
```

---

## Пояснение

Почему правильный ответ именно такой
```

## Отладка

### Вопрос не отображается

- Проверьте синтаксис YAML (отступы критичны!)
- Убедитесь, что закрывающие тройные обратные кавычки есть
- Проверьте, что ID уникален

### Ответы не перемешиваются

- Проверьте настройку `randomizeAnswersOnCourseOpen` в Quiz Settings
- Перемешивание происходит **один раз** при открытии курса
- Закройте и откройте урок заново для перемешивания

### Навигация не блокируется

- Проверьте настройку `guardSlideNavigation` в Quiz Settings
- Убедитесь, что вопрос не завершён
- Проверьте, что на слайде есть незавершённый квиз

### Подсветка неправильная

- Убедитесь, что `correct: true` стоит у **всех** правильных ответов
- Для `single`/`truefalse` должен быть **ровно один** `correct: true`
- Для `multiple` может быть несколько `correct: true`

## Шаблоны для копирования

### Шаблон Single Choice

````quiz
id: 
kind: single
text: 
answers:
  - text: 
    correct: true
  - text: 
  - text: 
  - text: 
````

### Шаблон Multiple Choice

````quiz
id: 
kind: multiple
text: 
answers:
  - text: 
    correct: true
  - text: 
    correct: true
  - text: 
  - text: 
````

### Шаблон True/False

````quiz
id: 
kind: truefalse
text: 
answers:
  - text: True
    correct: true
  - text: False
````

## См. также

- [CourseGuide.md](../CourseGuide.md) — краткий обзор всех возможностей
- [Docs/Examples/quiz_single.md](Examples/quiz_single.md) — пример single-choice
- [Docs/Examples/quiz_multiple_truefalse.md](Examples/quiz_multiple_truefalse.md) — примеры multiple и truefalse


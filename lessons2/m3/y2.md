# Модуль 3, Урок 2: Условия `else if` + логические операторы (Dino 3D)

**Цель урока:** научиться писать ветвления `if / else if / else`, использовать `&&`, `||`, `!` и применить это в Dino 3D: проверка земли (Raycast), прыжок только с земли, камера follow.

---

В Dino 3D мы постоянно отвечаем на вопросы “можно или нельзя”: **можно прыгнуть? на земле ли я? на паузе ли игра?**
Сегодня превращаем эти вопросы в код, который управляет игрой.

---

Чтобы прыжок был “по‑настоящему”, он должен срабатывать только **когда выполнены условия**.
Сейчас разберём `else if` и логические операторы, чтобы писать такие проверки коротко и понятно.

---

## Теория 1: `else if` — несколько вариантов поведения

`else if` — это “иначе если”. Проверки идут **сверху вниз**, пока не найдётся первая подходящая.

Пример:

```csharp
int hp = 35;

if (hp > 50)
    Debug.Log("HP: много");
else if (hp > 20)
    Debug.Log("HP: средне");
else
    Debug.Log("HP: мало");
```

---

```quiz
id: l2m3y2-q-elseif-order
kind: single
text: Как выполняется цепочка if / else if / else?
answers:
  - text: Все ветки выполняются по очереди
  - text: Сверху вниз, выполняется первая подходящая ветка
    correct: true
  - text: Снизу вверх
```

---

## Пояснение (порядок else if)

- Выполняется первая ветка, условие которой стало `true`. Остальные пропускаются.

---

```quiz
id: l2m3y2-q-elseif-which
kind: single
text: Что выведет код, если hp = 25?
answers:
  - text: "HP: много"
  - text: "HP: средне"
    correct: true
  - text: "HP: мало"
```

---

## Пояснение (hp = 25)

- `25 > 50` — false
- `25 > 20` — true → срабатывает “HP: средне”

---

## Практика 1: Тренировка в коде — “скорость динозавра” (else if)

Это отдельная тренировка **не в Dino 3D**, чтобы спокойно закрепить `else if`.

### Часть 1: Проверка знаний (Quiz)

```quiz
id: l2m3y2-p1-q-elseif-first-match
kind: single
text: Сколько веток выполнится в цепочке if / else if / else за один запуск?
answers:
  - text: Только одна — первая подходящая
    correct: true
  - text: Две
  - text: Все
```

---

## Ответы: Практика 1 (Quiz)

- Выполняется только первая подходящая ветка.

---

```quiz
id: l2m3y2-p1-q-elseif-order-important
kind: truefalse
text: В цепочке else if порядок условий важен.
answers:
  - text: True
    correct: true
  - text: False
```

---

## Ответы: Практика 1 (Quiz) — продолжение

- Если сверху стоит слишком “общее” условие, нижние могут никогда не выполниться.

---

### Часть 2: Тренировка в коде

**Задача:**

1. Создайте скрипт `SpeedStateDemo.cs`.
2. Сделайте переменную `speed`.
3. Выведите в консоль состояние:
   - если `speed >= 8` → “Скорость: высокая”
   - иначе если `speed >= 5` → “Скорость: нормальная”
   - иначе → “Скорость: низкая”

```check
rules:
  - filename: "SpeedStateDemo.cs"
  - contains: "else if"
  - contains: ">="
  - contains: "Debug.Log"
```

---

## Перерыв

---

Чтобы в игре проверять сразу несколько вещей (“на земле” И “нажали кнопку” И “не на паузе”), нам нужны логические операторы.
Сейчас разберём `&&`, `||`, `!` и сразу применим их к прыжку.

---

## Теория 2: Логические операторы `&&`, `||`, `!`

- `&&` — И: должно быть true **всё сразу**
- `||` — ИЛИ: достаточно, чтобы true было **хотя бы одно**
- `!` — НЕ: переворачивает `true ↔ false`

Мини‑пример:

```csharp
bool isGrounded = true;
bool jumpPressed = true;
bool isPaused = false;

if (isGrounded && jumpPressed && !isPaused)
    Debug.Log("Можно прыгать");
```

---

```quiz
id: l2m3y2-q-and-operator
kind: single
text: Какой оператор означает логическое И?
answers:
  - text: ||
  - text: &&
    correct: true
  - text: !
```

---

## Пояснение (оператор И)

- `&&` означает “всё одновременно”.

---

```quiz
id: l2m3y2-q-or-operator
kind: single
text: Какой оператор означает логическое ИЛИ?
answers:
  - text: &&
  - text: ||
    correct: true
  - text: ==
```

---

## Пояснение (оператор ИЛИ)

- `||` означает: достаточно одного условия `true`.

---

## Теория 3: Проверка земли через Raycast

Чтобы прыжок был “как в настоящей игре”, сначала проверяем: **на земле ли игрок**.
Один из гибких способов — пустить луч вниз (`Raycast`).

Пример:

```csharp
bool isGrounded = Physics.Raycast(transform.position, Vector3.down, 1.1f);
```

---

```quiz
id: l2m3y2-q-ray-direction
kind: single
text: В каком направлении нужно пустить луч, чтобы проверить землю под игроком?
answers:
  - text: Vector3.up
  - text: Vector3.down
    correct: true
  - text: Vector3.right
```

---

## Пояснение (направление луча)

- Земля находится “ниже”, поэтому используем `Vector3.down`.

---

```quiz
id: l2m3y2-q-raycast-returns-true
kind: truefalse
text: Physics.Raycast(...) возвращает true, если луч столкнулся с коллайдером.
answers:
  - text: True
    correct: true
  - text: False
```

---

## Пояснение (Raycast возвращает true)

- Поэтому Raycast удобно использовать как проверку “попал/не попал”.

---

## Практика 2: Применение в игре — прыжок только с земли + камера (маленькими шагами)

### Шаг 1: Луч вниз (визуализация)

В `DinoController.cs` добавьте `rayDistance` и рисуйте луч в `Update()`:

```csharp
Debug.DrawRay(transform.position, Vector3.down * rayDistance, Color.red);
```

```check
rules:
  - filename: "DinoController.cs"
  - contains: "rayDistance"
  - contains: "Debug.DrawRay"
```

---

### Шаг 2: `isGrounded` через Raycast

```csharp
isGrounded = Physics.Raycast(transform.position, Vector3.down, rayDistance);
```

```check
rules:
  - filename: "DinoController.cs"
  - contains: "Physics.Raycast"
  - contains: "isGrounded"
```

---

### Шаг 3: Ввод: Space **или** ЛКМ, и прыжок только если на земле

```csharp
bool jumpPressed = Input.GetKeyDown(KeyCode.Space) || Input.GetMouseButtonDown(0);
if (isGrounded && jumpPressed)
    Jump();
```

```check
rules:
  - filename: "DinoController.cs"
  - contains: "GetMouseButtonDown(0)"
  - contains: "||"
  - contains: "&&"
  - contains: "Jump()"
```

---

### Шаг 4: Камера следует за игроком (`CameraController.cs`)

```csharp
using UnityEngine;

public class CameraController : MonoBehaviour
{
    public Transform target;
    public Vector3 offset;

    void LateUpdate()
    {
        var pos = transform.position;
        pos.x = target.position.x;
        transform.position = pos + offset;
    }
}
```

```check
rules:
  - filename: "CameraController.cs"
  - contains: "LateUpdate"
  - contains: "target"
  - contains: "offset"
  - contains: "pos.x"
```

---

## Итоги

На уроке мы:

- освоили `else if` и цепочки условий
- разобрали `&&`, `||`, `!` для “можно/нельзя” в игре
- сделали проверку земли через Raycast
- улучшили Dino 3D: прыжок только с земли + ввод Space/ЛКМ + камера follow
